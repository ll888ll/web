{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load i18n_urls %}

{% block title %}{{ product.name }} · Buddy · Croody{% endblock %}
{% block header_cta_url %}{% lang_url 'shop:checkout-preview' %}?product={{ product.slug }}{% endblock %}

{% block body %}
  <main id="main" tabindex="-1">
    <section class="section" aria-labelledby="product-title">
      <div class="container product-detail">
        <div class="product-detail__media" aria-hidden="true">
          <div class="product-card__img">
            {% if product.badge_label %}<span class="chip chip--glow">{{ product.badge_label }}</span>{% endif %}
          </div>
        </div>
        <div class="product-detail__content">
          <h1 id="product-title">{{ product.name }}</h1>
          <p class="lead">{{ product.teaser }}</p>
          <div class="product-detail__meta">
            <span class="product-card__price">${{ product.price|floatformat:0 }}</span>
            <span class="product-card__note">{{ product.delivery_estimate }}</span>
          </div>
          <div class="product-detail__actions">
            <a class="btn btn--primary" href="{% lang_url 'shop:checkout-preview' %}?product={{ product.slug }}">{% trans "Comprar ahora" %}</a>
            <a class="btn btn--ghost" href="{% lang_url 'shop:catalogue' %}">{% trans "Volver a la tienda" %}</a>
          </div>
          {% if product.description %}
            <div class="product-detail__description">{{ product.description|linebreaks }}</div>
          {% endif %}
        </div>
      </div>
    </section>

    <section class="section product-extras" aria-labelledby="product-extras-title">
      <div class="container product-extras__grid">
        <div>
          <h2 id="product-extras-title">{% trans "Compra con seguridad" %}</h2>
          <ul>
            {% for note in purchase_highlights %}
              <li>{{ note }}</li>
            {% endfor %}
          </ul>
        </div>
        <div>
          <h3>{% trans "Después de comprar" %}</h3>
          <ul>
            {% for item in post_purchase_steps %}
              <li>{{ item }}</li>
            {% endfor %}
          </ul>
          <a class="link-inline" href="{% lang_url 'shop:catalogue' %}#catalogo">{% trans "Volver al catálogo" %}</a>
        </div>
      </div>
    </section>

    {% if related_products %}
      <section class="section" aria-labelledby="related-title">
        <div class="container">
          <div class="section__header">
            <h2 id="related-title">{% trans "También podría interesarte" %}</h2>
            <p>{% trans "Tres recomendaciones para seguir creciendo con tu Buddy." %}</p>
          </div>
          <div class="product-grid product-grid--catalogue">
            {% for item in related_products %}
              <article class="product-card product-card--catalogue">
                <header>
                  {% if item.badge_label %}<span class="chip chip--outline">{{ item.badge_label }}</span>{% endif %}
                  <h3>{{ item.name }}</h3>
                </header>
                <p>{{ item.teaser }}</p>
                <div class="product-card__footer">
                  <span class="product-card__price">${{ item.price|floatformat:0 }}</span>
                  <span class="product-card__note">{{ item.delivery_estimate }}</span>
                </div>
                <div class="product-card__actions">
                  <a class="btn btn--primary" href="{{ item.get_absolute_url }}">{% trans "Ver detalles" %}</a>
                  <a class="btn btn--ghost" href="{% lang_url 'shop:checkout-preview' %}?product={{ item.slug }}">{% trans "Comprar ahora" %}</a>
                </div>
              </article>
            {% endfor %}
          </div>
        </div>
      </section>
    {% endif %}
  </main>
{% endblock %}
